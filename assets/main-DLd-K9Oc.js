import"./style-B04UmR2D.js";window.addEventListener("load",function(){const e=document.getElementById("preloader");e&&(e.classList.add("hidden"),e.addEventListener("transitionend",()=>e.remove()))});window.addEventListener("pageshow",function(e){if(e.persisted){const t=document.getElementById("preloader");t&&(t.classList.add("hidden"),t.addEventListener("transitionend",()=>t.remove()))}});const d=document.getElementById("name");d.addEventListener("input",()=>{d.value=d.value.replace(/[^A-Za-zА-Яа-яЁё\s-]/g,"").replace(/\s{2,}/g," ").replace(/-{2,}/g,"-")});const n=document.getElementById("phone"),w=e=>{const t=e.slice(0,10),o=t.slice(0,3),s=t.slice(3,6),r=t.slice(6,10);let a="+7";return a+=" "+o,s&&(a+=" "+s),r&&(a+=" "+r),a},f=e=>e.replace(/[^\d]/g,"").replace(/^7/,"");n.value.startsWith("+7")||(n.value="+7 ");n.addEventListener("beforeinput",e=>{const t=n.selectionStart||0,o=n.selectionEnd||0;(t<3||t<=3&&o>0)&&(e.inputType.startsWith("delete")||e.inputType==="insertText"&&e.data==="")&&e.preventDefault()});n.addEventListener("input",()=>{const e=f(n.value);n.value=w(e)});n.addEventListener("focus",()=>{(!n.value||!n.value.startsWith("+7"))&&(n.value="+7 ")});n.addEventListener("blur",()=>{f(n.value).length!==10?n.setCustomValidity("Введите номер формата: +7 999 123 4567"):n.setCustomValidity("")});const m=document.querySelector(".burger"),y=document.querySelector(".nav"),B=document.querySelectorAll(".nav-link");m.addEventListener("click",()=>{m.classList.toggle("active"),y.classList.toggle("active")});B.forEach(e=>{e.addEventListener("click",()=>{m.classList.remove("active"),y.classList.remove("active")})});window.addEventListener("scroll",()=>{const e=document.querySelector(".header");window.scrollY>100?e.style.background="rgba(10, 10, 10, 0.98)":e.style.background="rgba(10, 10, 10, 0.95)"});const l=document.getElementById("bookingForm"),p=document.getElementById("formSuccess"),S="8010460362:AAHiaFE-wyWsnjME6XEaAuyxPM4ABkoiGyU",g="1316631132",v=`https://api.telegram.org/bot${S}`,A={arm:"Рука",forearm:"Предплечье",shoulder:"Плечо",back:"Спина",chest:"Грудь",leg:"Нога",other:"Другое"},T={small:"Маленькая (до 5 см)",medium:"Средняя (5–15 см)",large:"Большая (15+ см)"};l.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("name").value.trim(),o=document.getElementById("phone").value.trim(),s=document.getElementById("telegram").value.trim(),r=document.getElementById("tattoo-idea").value.trim(),a=document.getElementById("placement").value,u=document.getElementById("size").value,h=document.getElementById("photo"),E=new Date().toLocaleString(),L=A[a]||a||"—",b=T[u]||u||"—",I=`
📅 *Новая запись!*

👤 Имя: ${t}
📞 Телефон: ${o}
💬 Telegram: ${s||"—"}
🎨 Идея тату: ${r}
📍 Место: ${L}
📏 Размер: ${b}
🕓 Время: ${E}
  `.trim();try{await fetch(`${v}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:g,text:I,parse_mode:"Markdown"})});const c=h?.files?.[0];if(c)if(c.size>10485760)alert("Фото превышает 10 МБ. Пожалуйста, загрузите файл поменьше.");else{const i=new FormData;i.append("chat_id",g),i.append("photo",c,c.name),i.append("caption","Фото к заявке"),await fetch(`${v}/sendPhoto`,{method:"POST",body:i})}console.log("✅ Уведомление отправлено"),l.style.display="none",p.classList.add("show")}catch(c){console.error("❌ Ошибка при отправке",c),alert("Не удалось отправить заявку, попробуйте позже.")}l.style.display="none",p.classList.add("show"),l.reset()});const k={threshold:.1,rootMargin:"0px 0px -100px 0px"},x=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.style.opacity="1",t.target.style.transform="translateY(0)")})},k);document.querySelectorAll(".portfolio-item, .process-step, .contact-card").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",x.observe(e)});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const o=document.querySelector(this.getAttribute("href"));if(o){const s=document.querySelector(".header").offsetHeight,r=o.offsetTop-s;window.scrollTo({top:r,behavior:"smooth"})}})});

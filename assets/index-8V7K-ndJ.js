(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();window.addEventListener("load",function(){const e=document.getElementById("preloader");e&&(e.classList.add("hidden"),e.addEventListener("transitionend",()=>e.remove()))});window.addEventListener("pageshow",function(e){if(e.persisted){const t=document.getElementById("preloader");t&&(t.classList.add("hidden"),t.addEventListener("transitionend",()=>t.remove()))}});const u=document.getElementById("name");u.addEventListener("input",()=>{u.value=u.value.replace(/[^A-Za-zА-Яа-яЁё\s-]/g,"").replace(/\s{2,}/g," ").replace(/-{2,}/g,"-")});const s=document.getElementById("phone"),w=e=>{const t=e.slice(0,10),r=t.slice(0,3),a=t.slice(3,6),n=t.slice(6,10);let o="+7";return o+=" "+r,a&&(o+=" "+a),n&&(o+=" "+n),o},y=e=>e.replace(/[^\d]/g,"").replace(/^7/,"");s.value.startsWith("+7")||(s.value="+7 ");s.addEventListener("beforeinput",e=>{const t=s.selectionStart||0,r=s.selectionEnd||0;(t<3||t<=3&&r>0)&&(e.inputType.startsWith("delete")||e.inputType==="insertText"&&e.data==="")&&e.preventDefault()});s.addEventListener("input",()=>{const e=y(s.value);s.value=w(e)});s.addEventListener("focus",()=>{(!s.value||!s.value.startsWith("+7"))&&(s.value="+7 ")});s.addEventListener("blur",()=>{y(s.value).length!==10?s.setCustomValidity("Введите номер формата: +7 999 123 4567"):s.setCustomValidity("")});const m=document.querySelector(".burger"),h=document.querySelector(".nav"),B=document.querySelectorAll(".nav-link");m.addEventListener("click",()=>{m.classList.toggle("active"),h.classList.toggle("active")});B.forEach(e=>{e.addEventListener("click",()=>{m.classList.remove("active"),h.classList.remove("active")})});window.addEventListener("scroll",()=>{const e=document.querySelector(".header");window.scrollY>100?e.style.background="rgba(10, 10, 10, 0.98)":e.style.background="rgba(10, 10, 10, 0.95)"});const d=document.getElementById("bookingForm"),p=document.getElementById("formSuccess"),S="8010460362:AAHiaFE-wyWsnjME6XEaAuyxPM4ABkoiGyU",f="1316631132",g=`https://api.telegram.org/bot${S}`,A={arm:"Рука",forearm:"Предплечье",shoulder:"Плечо",back:"Спина",chest:"Грудь",leg:"Нога",other:"Другое"},T={small:"Маленькая (до 5 см)",medium:"Средняя (5–15 см)",large:"Большая (15+ см)"};d.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("name").value.trim(),r=document.getElementById("phone").value.trim(),a=document.getElementById("telegram").value.trim(),n=document.getElementById("tattoo-idea").value.trim(),o=document.getElementById("placement").value,i=document.getElementById("size").value,v=document.getElementById("photo"),E=new Date().toLocaleString(),L=A[o]||o||"—",b=T[i]||i||"—",I=`
📅 *Новая запись!*

👤 Имя: ${t}
📞 Телефон: ${r}
💬 Telegram: ${a||"—"}
🎨 Идея тату: ${n}
📍 Место: ${L}
📏 Размер: ${b}
🕓 Время: ${E}
  `.trim();try{await fetch(`${g}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:f,text:I,parse_mode:"Markdown"})});const c=v?.files?.[0];if(c)if(c.size>10485760)alert("Фото превышает 10 МБ. Пожалуйста, загрузите файл поменьше.");else{const l=new FormData;l.append("chat_id",f),l.append("photo",c,c.name),l.append("caption","Фото к заявке"),await fetch(`${g}/sendPhoto`,{method:"POST",body:l})}console.log("✅ Уведомление отправлено"),d.style.display="none",p.classList.add("show")}catch(c){console.error("❌ Ошибка при отправке",c),alert("Не удалось отправить заявку, попробуйте позже.")}d.style.display="none",p.classList.add("show"),d.reset()});const O={threshold:.1,rootMargin:"0px 0px -100px 0px"},P=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.style.opacity="1",t.target.style.transform="translateY(0)")})},O);document.querySelectorAll(".portfolio-item, .process-step, .contact-card").forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease",P.observe(e)});document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const r=document.querySelector(this.getAttribute("href"));if(r){const a=document.querySelector(".header").offsetHeight,n=r.offsetTop-a;window.scrollTo({top:n,behavior:"smooth"})}})});
